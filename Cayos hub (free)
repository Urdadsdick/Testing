-- Initialize OrionLib
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()

local Window = OrionLib:MakeWindow({
    Name = "Cayos Hub for Street Wars 2",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "CayosHubConfig"
})

-- Initialize Global Variables
_G.autoMop = false
_G.autoPickup = false
_G.pickupRange = 5000000
_G.onePunch = false
_G.godMode = false
_G.flying = false
_G.speed = 50
_G.noclip = false

-- Function: Auto Pickup
local function startAutoPickup()
    _G.autoPickup = true
    while _G.autoPickup do
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        if character and character:FindFirstChild("HumanoidRootPart") then
            local hrp = character.HumanoidRootPart
            -- Loop through all the items in the workspace that are tools (we'll assume tools are pickupable)
            for _, item in pairs(workspace:GetChildren()) do
                if item:IsA("Tool") and item.Name:lower():find("gun") then
                    local distance = (hrp.Position - item.Position).Magnitude
                    if distance <= _G.pickupRange then
                        -- Attempt to "pick up" the item by simulating a touch
                        firetouchinterest(hrp, item.Handle, 0)
                        firetouchinterest(hrp, item.Handle, 1)
                    end
                end
            end
        end
        task.wait(0.1)
    end
end

local function stopAutoPickup()
    _G.autoPickup = false
end

-- Function: God Mode (Improved)
local function enableGodMode()
    if _G.godMode then return end
    _G.godMode = true
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:FindFirstChild("Humanoid")

    if humanoid then
        -- Override health updates to prevent death
        humanoid.HealthChanged:Connect(function(health)
            if _G.godMode and health < humanoid.MaxHealth then
                humanoid.Health = humanoid.MaxHealth
            end
        end)

        -- Prevent any death-related changes
        humanoid.Died:Connect(function()
            if _G.godMode then
                humanoid.Health = humanoid.MaxHealth
                -- Optionally, teleport the player to a safe position or reset actions
            end
        end)
    end
end

local function disableGodMode()
    _G.godMode = false
end

-- Teleportation Function
local function teleportToLocation(position)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    if character and character:FindFirstChild("HumanoidRootPart") then
        character:SetPrimaryPartCFrame(CFrame.new(position))
    end
end

-- Teleports Tab
local teleportTab = Window:MakeTab({
    Name = "Teleports",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

teleportTab:AddButton({
    Name = "Teleport to Casino",
    Callback = function()
        teleportToLocation(Vector3.new(100, 0, 100)) -- Replace with actual casino coordinates
    end
})

-- Player Tab
local playerTab = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

playerTab:AddSlider({
    Name = "Walk Speed",
    Min = 16,
    Max = 100,
    Default = _G.speed,
    Callback = function(value)
        _G.speed = value
        local player = game.Players.LocalPlayer
        local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = _G.speed
        end
    end
})

-- God Mode and Auto Pickup Toggle
local usefulTab = Window:MakeTab({
    Name = "Useful",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

usefulTab:AddToggle({
    Name = "God Mode",
    Default = false,
    Callback = function(state)
        if state then
            enableGodMode()
        else
            disableGodMode()
        end
    end
})

usefulTab:AddToggle({
    Name = "Auto Pickup",
    Default = false,
    Callback = function(state)
        if state then
            startAutoPickup()
        else
            stopAutoPickup()
        end
    end
})

-- Credits Tab
local creditsTab = Window:MakeTab({
    Name = "Credits",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

creditsTab:AddParagraph("Credits", "Script by Cayos.\nUI Framework by OrionLib.\nDiscord: https://discord.gg/yuJB7MkF")
