-- Load OrionLib
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()

-- Create Window for GUI
local Window = OrionLib:MakeWindow({
    Name = "Cayos Hub for Street Wars 2",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "CayosHubConfig"
})

-- Global Variables
_G.autoMop = false
_G.autoPickup = false
_G.onePunch = false
_G.godMode = false
_G.flying = false
_G.speed = 50

-- Debugging function for output
local function debugMessage(msg)
    print("[DEBUG]: " .. msg)
end

-- GodMode
local function toggleGodMode()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    if _G.godMode then
        humanoid.Health = humanoid.MaxHealth
        debugMessage("God Mode: Enabled")
    else
        debugMessage("God Mode: Disabled")
    end
end

-- Fly
local function startFly()
    if _G.flying then return end
    _G.flying = true
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    local bodyGyro = Instance.new("BodyGyro", humanoidRootPart)
    local bodyVelocity = Instance.new("BodyVelocity", humanoidRootPart)
    bodyGyro.P = 9e4
    bodyGyro.MaxTorque = Vector3.new(9e4, 9e4, 9e4)
    bodyGyro.CFrame = humanoidRootPart.CFrame
    bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)

    debugMessage("Flying Enabled")
    
    while _G.flying do
        bodyGyro.CFrame = workspace.CurrentCamera.CFrame
        bodyVelocity.Velocity = workspace.CurrentCamera.CFrame.LookVector * _G.speed
        wait(0.1)
    end

    bodyGyro:Destroy()
    bodyVelocity:Destroy()
end

local function stopFly()
    _G.flying = false
    debugMessage("Flying Disabled")
end

-- One Punch Mode
local function enableOnePunch()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    humanoidRootPart.Touched:Connect(function(hit)
        local otherPlayer = game.Players:GetPlayerFromCharacter(hit.Parent)
        if _G.onePunch and otherPlayer and otherPlayer ~= player then
            local otherHumanoid = hit.Parent:FindFirstChild("Humanoid")
            if otherHumanoid then
                otherHumanoid.Health = 0
                debugMessage("One Punch: Killed " .. otherPlayer.Name)
            end
        end
    end)
end

-- Auto Pickup
local function startAutoPickup()
    _G.autoPickup = true
    while _G.autoPickup do
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()

        for _, item in pairs(workspace:GetChildren()) do
            if item:IsA("Tool") and item.Name:lower():find("gun") then
                local distance = (character.HumanoidRootPart.Position - item.Position).Magnitude
                if distance <= 50 then  -- Pickup range
                    firetouchinterest(character.HumanoidRootPart, item.Handle, 0)
                    firetouchinterest(character.HumanoidRootPart, item.Handle, 1)
                    debugMessage("Picked up item: " .. item.Name)
                end
            end
        end
        wait(0.1)
    end
end

local function stopAutoPickup()
    _G.autoPickup = false
    debugMessage("Auto Pickup: Disabled")
end

-- Main Window Setup
local playerTab = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- God Mode Toggle
playerTab:AddToggle({
    Name = "God Mode",
    Default = false,
    Callback = function(state)
        _G.godMode = state
        toggleGodMode()
    end
})

-- Fly Controls
playerTab:AddButton({
    Name = "Fly",
    Callback = function()
        startFly()
    end
})

playerTab:AddButton({
    Name = "Stop Fly",
    Callback = function()
        stopFly()
    end
})

-- One Punch Toggle
playerTab:AddToggle({
    Name = "One Punch Mode",
    Default = false,
    Callback = function(state)
        _G.onePunch = state
        if _G.onePunch then
            enableOnePunch()
        else
            debugMessage("One Punch: Disabled")
        end
    end
})

-- Auto Pickup Controls
local usefulTab = Window:MakeTab({
    Name = "Useful",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

usefulTab:AddToggle({
    Name = "Auto Pickup",
    Default = false,
    Callback = function(state)
        if state then
            startAutoPickup()
        else
            stopAutoPickup()
        end
    end
})

-- Teleport Tab (Example: Teleport to Casino)
local teleportTab = Window:MakeTab({
    Name = "Teleports",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

teleportTab:AddButton({
    Name = "Teleport to Casino",
    Callback = function()
        -- Coordinates for the casino (example location, needs to be accurate)
        local casinoPosition = Vector3.new(100, 50, 200)
        game.Players.LocalPlayer.Character:SetPrimaryPartCFrame(CFrame.new(casinoPosition))
        debugMessage("Teleported to Casino")
    end
})

-- Credits Tab (Including Discord link)
local creditsTab = Window:MakeTab({
    Name = "Credits",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

creditsTab:AddParagraph("Credits", "Script by Cayos.\nUI Framework by OrionLib.\nDiscord: https://discord.gg/yuJB7MkF")

-- Final Debug Log
debugMessage("Script Loaded and Ready.")
