-- Key System Setup
local keyRequired = "GoatedHub123" -- Set the required key
local keyUrl = "https://discord.gg/ADQUB6W7" -- Link for "Get Key"

-- Load Orion Library
local success, OrionLib = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()
end)

if not success then
    warn("Failed to load Orion Library.")
    return
end

-- Features Function
function loadScriptFeatures()
    local Window = OrionLib:MakeWindow({
        Name = "Goated Hub",
        HidePremium = false,
        SaveConfig = true,
        ConfigFolder = "GoatedHub"
    })

    --- PLAYER FEATURES ---
    local playerTab = Window:MakeTab({ Name = "Player", Icon = "rbxassetid://4483345998", PremiumOnly = false })

    playerTab:AddSlider({
        Name = "Walk Speed",
        Min = 16,
        Max = 100,
        Default = 16,
        Increment = 1,
        Callback = function(value)
            local humanoid = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = value
            end
        end
    })

    playerTab:AddToggle({
        Name = "God Mode",
        Default = false,
        Callback = function(state)
            while state do
                local humanoid = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid.Health = humanoid.MaxHealth
                end
                wait(0.1)
            end
        end
    })

    playerTab:AddToggle({
        Name = "One Punch Kill",
        Default = false,
        Callback = function(state)
            while state do
                for _, player in pairs(game.Players:GetPlayers()) do
                    if player ~= game.Players.LocalPlayer and player.Character then
                        local humanoid = player.Character:FindFirstChild("Humanoid")
                        if humanoid then
                            humanoid.Health = 0
                        end
                    end
                end
                wait(0.1)
            end
        end
    })

    --- FARMING FEATURES ---
    local farmingTab = Window:MakeTab({ Name = "Farming", Icon = "rbxassetid://4483345998", PremiumOnly = false })

    farmingTab:AddToggle({
        Name = "Auto Mop Farm",
        Default = false,
        Callback = function(state)
            while state do
                local mop = game.Players.LocalPlayer.Backpack:FindFirstChild("Mop")
                if mop then
                    local root = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if root then
                        game.ReplicatedStorage.Remote:FireServer(mop, "Use", root.CFrame)
                    end
                end
                wait(0.1)
            end
        end
    })

    farmingTab:AddToggle({
        Name = "Auto Pickup",
        Default = false,
        Callback = function(state)
            while state do
                local root = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if root then
                    for _, item in pairs(workspace:GetDescendants()) do
                        if item:IsA("Tool") or item.Name == "Cash" then
                            pcall(function()
                                item.CFrame = root.CFrame
                            end)
                        end
                    end
                end
                wait(0.1)
            end
        end
    })

    --- ESP FEATURES ---
    local espTab = Window:MakeTab({ Name = "ESP", Icon = "rbxassetid://4483345998", PremiumOnly = false })

    espTab:AddToggle({
        Name = "Enable ESP",
        Default = false,
        Callback = function(state)
            while state do
                for _, player in pairs(game.Players:GetPlayers()) do
                    if player ~= game.Players.LocalPlayer and player.Character then
                        local highlight = player.Character:FindFirstChildOfClass("Highlight") or Instance.new("Highlight", player.Character)
                        highlight.FillColor = Color3.new(math.random(), math.random(), math.random())
                        highlight.OutlineColor = Color3.new(1, 1, 1)
                    end
                end
                wait(0.1)
            end
        end
    })

    --- FLYING FEATURES ---
    local flyingTab = Window:MakeTab({ Name = "Flying", Icon = "rbxassetid://4483345998", PremiumOnly = false })

    flyingTab:AddButton({
        Name = "Fly",
        Callback = function()
            local character = game.Players.LocalPlayer.Character
            local root = character and character:FindFirstChild("HumanoidRootPart")
            if root then
                local bodyGyro = Instance.new("BodyGyro", root)
                local bodyVelocity = Instance.new("BodyVelocity", root)

                bodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
                bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)

                game:GetService("RunService").RenderStepped:Connect(function()
                    bodyGyro.CFrame = root.CFrame
                    bodyVelocity.Velocity = root.CFrame.LookVector * 50
                end)
            end
        end
    })

    --- CREDITS ---
    local creditsTab = Window:MakeTab({ Name = "Credits", Icon = "rbxassetid://4483345998", PremiumOnly = false })
    creditsTab:AddLabel("Developed by yooo0684")
    creditsTab:AddButton({
        Name = "Join Discord",
        Callback = function()
            setclipboard("https://discord.gg/ADQUB6W7")
        end
    })

    OrionLib:Init()
end

-- Key System Function
local function showKeyPrompt()
    local keyInput = nil
    local Window = OrionLib:MakeWindow({
        Name = "Goated Hub - Key System",
        HidePremium = false,
        SaveConfig = false,
        ConfigFolder = "GoatedHub"
    })

    local keyTab = Window:MakeTab({ Name = "Key System", Icon = "rbxassetid://4483345998", PremiumOnly = false })
    
    keyTab:AddTextbox({
        Name = "Enter Key",
        Default = "",
        TextDisappear = false,
        Callback = function(value)
            keyInput = value
        end
    })
    
    keyTab:AddButton({
        Name = "Submit Key",
        Callback = function()
            if keyInput == keyRequired then
                OrionLib:MakeNotification({
                    Name = "Success",
                    Content = "Key Accepted! Loading Goated Hub...",
                    Image = "rbxassetid://4483345998",
                    Time = 5
                })
                Window:Destroy()
                loadScriptFeatures()
            else
                OrionLib:MakeNotification({
                    Name = "Error",
                    Content = "Invalid Key. Try Again!",
                    Image = "rbxassetid://4483345998",
                    Time = 5
                })
            end
        end
    })
    
    keyTab:AddButton({
        Name = "Get Key",
        Callback = function()
            setclipboard(keyUrl)
            OrionLib:MakeNotification({
                Name = "Key Copied",
                Content = "Key link copied to clipboard!",
                Image = "rbxassetid://4483345998",
                Time = 5
            })
        end
    })

    OrionLib:Init()
end

-- Show Key System on Execution
showKeyPrompt()
